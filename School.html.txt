<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>香港「一條龍」幼稚園互動指南</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: The application is designed as an interactive dashboard. It starts with a clear definition of 'through-train' kindergartens to manage user expectations. The core is an interactive filtering system (by district, gender, fee, progression rate) that allows parents to instantly find schools matching their criteria. Results are shown in a card-based layout for easy scanning. Clicking a card opens a detailed modal view. This task-oriented design is more user-friendly than a linear report. Key data points like fees and progression rates are visualized in dynamic bar charts that update with filters, providing quick comparative insights. Finally, the report's qualitative advice is broken down into digestible, visually distinct sections. This structure empowers users to actively explore and compare, rather than passively read. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Comprehensive school data table -> Goal: Organize & Compare -> Viz/Method: Interactive card grid with filters -> Interaction: Users select filters (district, gender, etc.) to dynamically update the grid of school cards. Clicking a card opens a modal with detailed text. -> Justification: Allows users to quickly narrow down options based on their specific needs, a more efficient process than manually scanning a large table.
        - Report Info: School fees & progression percentages -> Goal: Compare -> Viz/Method: Two horizontal bar charts (Chart.js/Canvas) -> Interaction: Charts are dynamically updated based on the active filters. Tooltips on hover show precise data. -> Justification: Visualizes numerical data for instant comparison, making it easier to spot outliers and trends than reading numbers in a table.
        - Report Info: Key considerations and advice for parents -> Goal: Inform & Guide -> Viz/Method: Structured HTML/CSS sections with icons and distinct styling (Tailwind CSS) -> Interaction: Static but visually engaging content blocks. -> Justification: Breaks down dense text into scannable, memorable points, improving readability and retention of important advice.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Noto Sans HK', sans-serif;
            background-color: #F8F7F4;
            color: #333333;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 400px;
            max-height: 50vh;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 500px;
            }
        }
        .custom-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #4A90E2;
            cursor: pointer;
            border-radius: 50%;
        }
        .custom-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #4A90E2;
            cursor: pointer;
            border-radius: 50%;
        }
        .modal-bg {
            background-color: rgba(0,0,0,0.5);
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-md py-6">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-4xl font-bold text-gray-800">香港「一條龍」幼稚園互動指南</h1>
            <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">本指南旨在將繁複的報告數據轉化為易於使用的互動工具，助您輕鬆尋找最適合子女的幼稚園。請注意，香港教育局並無官方的「幼小一條龍」制度，本指南中的學校是指與其聯繫小學有較高升學率的幼稚園。</p>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="filters" class="bg-white p-6 rounded-lg shadow-lg mb-8">
            <h2 class="text-2xl font-bold mb-6 text-center">快速篩選學校</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div>
                    <label for="district-filter" class="block text-sm font-medium text-gray-700 mb-2">地區</label>
                    <select id="district-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <option value="all">所有地區</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">學校性別</label>
                    <div class="flex space-x-2" id="gender-filter">
                        <button data-value="all" class="flex-1 p-2 bg-blue-500 text-white rounded-md">全部</button>
                        <button data-value="男女校" class="flex-1 p-2 bg-gray-200 text-gray-700 rounded-md">男女校</button>
                        <button data-value="女校" class="flex-1 p-2 bg-gray-200 text-gray-700 rounded-md">女校</button>
                    </div>
                </div>
                <div>
                    <label for="fee-filter" class="block text-sm font-medium text-gray-700 mb-2">全年學費 (HKD)</label>
                    <input type="range" id="fee-filter" min="0" max="100000" step="1000" value="100000" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer custom-slider">
                    <div class="text-center mt-1 text-gray-600">低於 $<span id="fee-value">100,000</span></div>
                </div>
                <div>
                    <label for="progression-filter" class="block text-sm font-medium text-gray-700 mb-2">聯繫小學升學率</label>
                    <input type="range" id="progression-filter" min="0" max="100" step="5" value="0" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer custom-slider">
                    <div class="text-center mt-1 text-gray-600">高於 <span id="progression-value">0</span>%</div>
                </div>
            </div>
        </section>

        <section id="school-list" class="mb-8">
            <div id="results-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
        </section>

        <section id="charts" class="bg-white p-6 rounded-lg shadow-lg mb-8">
            <h2 class="text-2xl font-bold mb-6 text-center">數據洞察：學費與升學率比較</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-center">全年學費比較圖</h3>
                    <p class="text-sm text-gray-500 text-center mb-4">此圖表顯示篩選後學校的大約全年學費，助您快速比較各校的費用水平。「免費」或極低費用通常表示學校參與了政府的幼稚園教育計劃。</p>
                    <div class="chart-container">
                        <canvas id="feeChart"></canvas>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-center">聯繫小學升學率比較圖</h3>
                    <p class="text-sm text-gray-500 text-center mb-4">此圖表展示幼稚園畢業生升讀其聯繫小學的比例。較高的百分比意味著更大的升學保障。部分學校未提供確實數據。</p>
                    <div class="chart-container">
                        <canvas id="progressionChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="considerations" class="mb-8">
            <h2 class="text-3xl font-bold text-center mb-8">選擇幼稚園的四大關鍵考量</h2>
             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-lg border-t-4 border-blue-400">
                    <h3 class="text-xl font-bold mb-3 flex items-center"><span class="text-2xl mr-3">🗣️</span>教學語言</h3>
                    <p class="text-gray-600">深入了解學校的語言環境，是「兩文三語」並重，還是側重某種語言？這直接關係到孩子能否順利銜接小學課程。家長應考慮學校的語言政策是否配合家庭的語言環境和期望。</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border-t-4 border-green-400">
                    <h3 class="text-xl font-bold mb-3 flex items-center"><span class="text-2xl mr-3">👫</span>學校性別</h3>
                    <p class="text-gray-600">幼稚園是男女校，但聯繫小學是否只收單一性別？這個細節至關重要，直接影響「一條龍」優勢是否適用於您的子女。務必核對清楚，避免期望落差。</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border-t-4 border-yellow-400">
                    <h3 class="text-xl font-bold mb-3 flex items-center"><span class="text-2xl mr-3">💰</span>學費與資助</h3>
                    <p class="text-gray-600">學費差異巨大，從免費到十多萬不等。高昂學費可能代表更豐富的資源，但也需考慮家庭負擔能力。部分學校參與政府資助計劃，學費會大幅降低。</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border-t-4 border-red-400">
                    <h3 class="text-xl font-bold mb-3 flex items-center"><span class="text-2xl mr-3">📊</span>解讀「排名」</h3>
                    <p class="text-gray-600">坊間排名並無官方標準，多為主觀評選。與其過分依賴排名，不如關注學校的辦學理念、課程特色、師資及與聯繫小學的實際銜接情況，這些才是更重要的「隱性指標」。</p>
                </div>
            </div>
        </section>
        
        <section id="advice" class="bg-blue-50 p-8 rounded-lg">
            <h2 class="text-3xl font-bold text-center mb-8">給家長的實用建議</h2>
            <div class="space-y-6 max-w-4xl mx-auto">
                <div class="flex items-start">
                    <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold text-xl">1</div>
                    <div class="ml-4">
                        <h4 class="text-lg font-semibold">超越「一條龍」標籤</h4>
                        <p class="text-gray-700">升學率固然吸引，但學校的教育理念、課程與環境是否適合您的孩子更為重要。一個快樂、受啟發的童年，遠比「直升」保證更有價值。</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold text-xl">2</div>
                    <div class="ml-4">
                        <h4 class="text-lg font-semibold">親身考察，感受氛圍</h4>
                        <p class="text-gray-700">積極參與學校的資訊日和開放日。親身感受校園氛圍、觀察師生互動，是書面資料無法取代的。直接與校方交流，獲取第一手資訊。</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold text-xl">3</div>
                    <div class="ml-4">
                        <h4 class="text-lg font-semibold">深入了解升學數據</h4>
                        <p class="text-gray-700">仔細查閱學校官方網站或教育局資料，了解最新的升學政策和實際比例。清楚的數據能助您評估「一條龍」的真正價值。</p>
                    </div>
                </div>
                 <div class="flex items-start">
                    <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold text-xl">4</div>
                    <div class="ml-4">
                        <h4 class="text-lg font-semibold">面試是雙向了解</h4>
                        <p class="text-gray-700">面試不僅評估孩子，也是學校了解家庭教育觀的機會。在日常生活中培養孩子的溝通能力和自信心，並在面試中展現您對教育的投入和對學校的認同。</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white mt-12 py-6">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2024 香港「一條龍」幼稚園互動指南</p>
            <p class="text-sm text-gray-400 mt-2">資訊來源於公開報告，僅供參考。請以學校官方公佈為準。</p>
        </div>
    </footer>
    
    <div id="modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg opacity-0 pointer-events-none">
        <div id="modal-content" class="bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto modal-content transform scale-95">
            <div class="sticky top-0 bg-white p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center">
                <h2 id="modal-title" class="text-2xl font-bold text-gray-800"></h2>
                <button id="modal-close" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            </div>
            <div id="modal-body" class="p-4 sm:p-6">
            </div>
        </div>
    </div>


    <script>
        const schoolData = [
            {
                id: 1,
                name: "德望小學暨幼稚園",
                district: "黃大仙區",
                primary: "德望小學",
                progressionRate: 80,
                progressionText: "約80%幼稚園生能直升小學",
                language: "中英並重，雙語教學",
                genderK: "女校",
                genderP: "女校",
                fee: 47500,
                feeText: "約 $47,500",
                rank: 1,
                details: `
                    <p class="mb-4">德望小學暨幼稚園位於黃大仙區，與德望小學及德望學校（中學部）有緊密聯繫，形成了幼小中一條龍的教育體系。這所學校是一所傳統的天主教女校，從幼稚園到中學部均只招收女生。對於希望女兒在單一性別環境中成長的家庭而言，德望提供了一條清晰且連貫的升學路徑。</p>
                    <p class="mb-4">在升學方面，德望小學暨幼稚園的學生約有80%的機會直升德望小學。然而，需要注意的是，幼稚園部畢業生並非保證直升小學部。儘管如此，這種高比例的內部升學機會，為家長提供了相當大的確定性。</p>
                    <p class="mb-4">學校在教學語言上中英並重，實行雙語教學。小學部入學面試會以英文及普通話進行，重點評估學生的溝通技巧、解難及協作能力。在2021年全港Top 100幼稚園排名中，德望小學暨幼稚園位列第一。</p>
                `
            },
            {
                id: 2,
                name: "民生書院幼稚園",
                district: "九龍城區",
                primary: "民生書院小學",
                progressionRate: 85,
                progressionText: "小學預留不少於85%學額",
                language: "英文為主要教學語言 (小學部)",
                genderK: "男女校",
                genderP: "男女校",
                fee: 51400,
                feeText: "約 $51,400",
                rank: 11,
                details: `
                    <p class="mb-4">民生書院幼稚園坐落於九龍城區，與民生書院小學及民生書院有緊密聯繫，構成一個幼小中一條龍的教育體系。這是一所男女校。</p>
                    <p class="mb-4">在升學銜接上，民生書院小學為民生書院幼稚園的學生預留了不少於85%的小一學額，優先取錄這些學生。這種高比例的優先取錄政策，為家長提供了極大的升學保障。</p>
                    <p class="mb-4">小學部在教學上高度重視英語培訓，除了中文、中國歷史、普通話及宗教科目外，所有科目均以英語為主要教學語言。學校以「光與生命」及「人人為我，我為人人」為校訓，致力提供以基督教信仰為基礎的全人教育。在2021年全港Top 100幼稚園中，民生書院幼稚園排名第11位。</p>
                `
            },
            {
                id: 3,
                name: "救恩學校幼稚園部",
                district: "中西區",
                primary: "救恩學校",
                progressionRate: 40,
                progressionText: "保留50學額給幼稚園生 (約3班)",
                language: "中文為主，設英語及普通話組",
                genderK: "男女校",
                genderP: "男女校",
                fee: 9550,
                feeText: "約 $9,550 (參與計劃)",
                rank: null,
                details: `
                    <p class="mb-4">救恩學校幼稚園部位於中西區的西營盤，其聯繫小學救恩學校也位於西營盤。這是一所男女校。</p>
                    <p class="mb-4">在升學方面，救恩學校小一收生約3班，其中保留了50個學額給幼稚園學生。學校的日常教學以中文為主要語言，但每週會安排多次英語會話和英文活動時間，並有專任老師教授普通話。</p>
                    <p class="mb-4">救恩學校幼稚園部參與了幼稚園教育計劃，這使得其學費相對較低。2024/25學年，全年學費為HKD$9,550。</p>
                `
            },
            {
                id: 4,
                name: "聖嘉勒小學（幼稚園部）",
                district: "中西區",
                primary: "聖嘉勒小學",
                progressionRate: 75,
                progressionText: "大部分幼稚園學生獲錄取",
                language: "中英並重，雙語教學",
                genderK: "女校",
                genderP: "女校",
                fee: 51000,
                feeText: "約 $51,000",
                rank: null,
                details: `
                    <p class="mb-4">聖嘉勒小學（幼稚園部）位於中西區，與聖嘉勒小學及聖嘉勒女書院有緊密聯繫。這是一所女校，從幼稚園到中學部均只招收女生。</p>
                    <p class="mb-4">在升學銜接上，聖嘉勒小學部會錄取大部分幼稚園學生，為女生提供了一條穩定且連貫的升學路徑。</p>
                    <p class="mb-4">學校在教學語言上中英並重，實行雙語教學。小學部除了中文、視藝、體育及法語外，其他科目均以英語為授課語言。學校亦參與了免費幼稚園計劃。</p>
                `
            },
            {
                id: 5,
                name: "高主教書院幼稚園部",
                district: "中西區",
                primary: "高主教書院小學部",
                progressionRate: 0,
                progressionText: "未提供數據",
                language: "中文(普通話)及英文",
                genderK: "男女校",
                genderP: "男女校",
                fee: 40800,
                feeText: "約 $40,800",
                rank: null,
                details: `
                    <p class="mb-4">高主教書院幼稚園部與高主教書院小學部和高主教書院有直屬關係。這是一所男女校。</p>
                    <p class="mb-4">學校的辦學表現良好，為學生提供了從幼稚園到中學的連貫教育途徑。</p>
                    <p class="mb-4">小學部在教學語言上中文（包括普通話）及英文並重，並實施普通話教中文的政策。</p>
                `
            },
            {
                id: 6,
                name: "玫瑰崗幼稚園",
                district: "灣仔區",
                primary: "玫瑰崗學校（小學部）",
                progressionRate: 0,
                progressionText: "未提供數據",
                language: "中文為主，訓練三文四語",
                genderK: "男女校",
                genderP: "男女校",
                fee: 35800,
                feeText: "約 $35,800 (半日)",
                rank: null,
                details: `
                    <p class="mb-4">玫瑰崗幼稚園位於灣仔區，與玫瑰崗學校（小學部）有聯繫。這是一所男女校。</p>
                    <p class="mb-4">在教學語言方面，玫瑰崗學校（小學部）以中文為主要教學語言。然而，學校在中、小、幼階段均致力於訓練學生掌握「三文四語」，即中文、英文、西班牙文，以及廣東話、普通話、英語和西班牙語。</p>
                `
            },
            {
                id: 7,
                name: "聖保祿幼稚園",
                district: "灣仔區",
                primary: "聖保祿學校（小學部）",
                progressionRate: 50,
                progressionText: "約50%",
                language: "中文及英文",
                genderK: "男女校",
                genderP: "女校",
                fee: 34050,
                feeText: "約 $34,050",
                rank: null,
                details: `
                    <p class="mb-4">聖保祿幼稚園位於灣仔區，是一所男女校，但其聯繫小學聖保祿學校（小學部）是女校。</p>
                    <p class="mb-4">聖保祿學校（小學部）不公開招生，因此，入讀其附屬幼稚園被視為升讀該小學的最佳途徑，約有50%的機會。</p>
                    <p class="mb-4">幼稚園的課程規劃按照兒童身心發展編定。小學部的校園語言環境主要為英文和粵語。</p>
                `
            },
            {
                id: 8,
                name: "香港真光中學（幼稚園部）",
                district: "灣仔區",
                primary: "香港真光中學（小學部）",
                progressionRate: 50,
                progressionText: "約50%",
                language: "中、英兼擅",
                genderK: "男女校",
                genderP: "女校",
                fee: 47000,
                feeText: "約 $47,000",
                rank: null,
                details: `
                    <p class="mb-4">香港真光中學（幼稚園部）位於灣仔區，是一所男女校。然而，其聯繫小學只招收女生，這意味著只有女生才能享有「一條龍」的升學優勢。</p>
                    <p class="mb-4">高班學生需通過校本評核及小學面試，方能升讀真光小學一年級，升學比例約為50%。</p>
                    <p class="mb-4">學校致力於培育中、英兼擅的學生，重視語文學習，並聘請外籍英語老師營造豐富的英語語境。</p>
                `
            },
            {
                id: 9,
                name: "九龍禮賢學校暨幼稚園",
                district: "九龍城區",
                primary: "九龍禮賢學校",
                progressionRate: 0,
                progressionText: "未提供數據",
                language: "中文為主，設英語及普通話組",
                genderK: "男女校",
                genderP: "男女校",
                fee: 39900,
                feeText: "約 $39,900",
                rank: null,
                details: `
                    <p class="mb-4">九龍禮賢學校暨幼稚園位於九龍城區，是一所男女校。本園沒有參加教育局的「免費幼稚園教育計劃」。</p>
                    <p class="mb-4">在教學語言方面，日常課堂以中文為主要教學語言。此外，學校每週會安排多次英語會話和英文活動時間，旨在提升學生對學習兩文三語的興趣。</p>
                `
            },
            {
                id: 10,
                name: "聖母幼稚園",
                district: "黃大仙區",
                primary: "聖母小學",
                progressionRate: 0,
                progressionText: "未提供數據",
                language: "設外籍/母語老師教英語及普通話",
                genderK: "男女校",
                genderP: "女校",
                fee: 0,
                feeText: "免費 (參與計劃)",
                rank: null,
                details: `
                    <p class="mb-4">聖母幼稚園位於黃大仙區，是一所男女校，但其聯繫小學是女校。學校的辦學表現良好。</p>
                    <p class="mb-4">在教學語言方面，聖母幼稚園的英語及普通話課程分別由外籍英語老師和普通話為母語的老師任教，讓幼兒在輕鬆、自然的語境下學習。</p>
                    <p class="mb-4">聖母幼稚園參與了幼稚園教育計劃，學費非常低廉，半日班近乎免費。</p>
                `
            },
            {
                id: 11,
                name: "香港培正小學（幼稚園）",
                district: "九龍城區",
                primary: "香港培正小學",
                progressionRate: 85,
                progressionText: "約85% (有指100%)",
                language: "中文為主，培育兩文三語",
                genderK: "男女校",
                genderP: "男女校",
                fee: 48530,
                feeText: "約 $48,530",
                rank: null,
                details: `
                    <p class="mb-4">香港培正小學（幼稚園）位於九龍城區，直屬香港培正小學，是一所男女校。</p>
                    <p class="mb-4">在升學方面，約有85%的幼稚園學生能升上香港培正小學，有資料甚至顯示可100%直升。</p>
                    <p class="mb-4">小學部以中文為教學語言。幼稚園則以兒童為中心，培育多元智能的發展，並設有幼小銜接活動。</p>
                `
            },
            {
                id: 12,
                name: "香港培道小學幼稚園",
                district: "九龍城區",
                primary: "香港培道小學",
                progressionRate: 100,
                progressionText: "100%",
                language: "中文為主，重視語文學習",
                genderK: "男女校",
                genderP: "男女校",
                fee: 0,
                feeText: "免費",
                rank: null,
                details: `
                    <p class="mb-4">香港培道小學幼稚園位於九龍城區，是一所男女校。它是香港少數的幼小「一條龍」學校。</p>
                    <p class="mb-4">其學生可以100%升讀香港培道小學，為家長提供了極大的升學確定性。</p>
                    <p class="mb-4">小學部以中文為教學語言，普通話由專業普通話教師任教。香港培道小學幼稚園的學費為免費。</p>
                `
            },
            {
                id: 13,
                name: "啓思小學附屬幼稚園",
                district: "九龍城區",
                primary: "啓思小學",
                progressionRate: 0,
                progressionText: "有優先入讀機會",
                language: "廣東話，英文，普通話",
                genderK: "男女校",
                genderP: "男女校",
                fee: 72930,
                feeText: "約 $72,930",
                rank: null,
                details: `
                    <p class="mb-4">啓思小學附屬幼稚園位於九龍城區，是一所男女校。幼稚園的學生有優先入讀啓思小學的機會。</p>
                    <p class="mb-4">學校積極在課程中實踐和深化「探索式的學習」。</p>
                    <p class="mb-4">在教學語言方面，學校提供廣東話、英文和普通話教學，強調兩文三語，並配備專門的語言教師。</p>
                `
            },
            {
                id: 14,
                name: "聖若望英文書院（幼稚園部）",
                district: "九龍城區",
                primary: "聖若望英文書院（小學部）",
                progressionRate: 0,
                progressionText: "未提供數據",
                language: "英語為主要教學語言",
                genderK: "男女校",
                genderP: "男女校",
                fee: 80400,
                feeText: "約 $80,400 (幼兒班)",
                rank: null,
                details: `
                    <p class="mb-4">聖若望英文書院（幼稚園部）位於九龍城區，是聖若望英文書院（小學部）的直屬幼稚園，為男女校。</p>
                    <p class="mb-4">學校以英語為主要教學語言，並設有中文、普通話、Phonics等課程。</p>
                    <p class="mb-4">學校致力於透過綜合課程培養學生積極的態度和價值觀。學費相對較高。</p>
                `
            },
            {
                id: 15,
                name: "崇真小學暨幼稚園",
                district: "深水埗區",
                primary: "崇真小學暨幼稚園（小學部）",
                progressionRate: 70,
                progressionText: "預留7成位置給幼稚園學生",
                language: "兩文三語，普教中",
                genderK: "男女校",
                genderP: "男女校",
                fee: 41600,
                feeText: "約 $41,600",
                rank: null,
                details: `
                    <p class="mb-4">崇真小學暨幼稚園位於深水埗區，是一所男女校。</p>
                    <p class="mb-4">在升學方面，小學部預留了7成位置給崇真小學暨幼稚園的學生升學。</p>
                    <p class="mb-4">學校積極營造兩文三語的環境，中文課程的授課語言為普通話，各班班主任是由英文和普通話為母語的專業教師擔任。</p>
                `
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const resultsContainer = document.getElementById('results-container');
            const districtFilter = document.getElementById('district-filter');
            const genderFilter = document.getElementById('gender-filter');
            const feeFilter = document.getElementById('fee-filter');
            const feeValue = document.getElementById('fee-value');
            const progressionFilter = document.getElementById('progression-filter');
            const progressionValue = document.getElementById('progression-value');

            let feeChart, progressionChart;

            const districts = [...new Set(schoolData.map(s => s.district))];
            districts.forEach(d => {
                const option = document.createElement('option');
                option.value = d;
                option.textContent = d;
                districtFilter.appendChild(option);
            });

            function renderCards(schools) {
                resultsContainer.innerHTML = '';
                if (schools.length === 0) {
                    resultsContainer.innerHTML = `<p class="text-gray-500 col-span-full text-center">沒有找到符合條件的學校。</p>`;
                    return;
                }
                schools.forEach(school => {
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-lg shadow-md overflow-hidden transform hover:-translate-y-1 transition-transform duration-300 cursor-pointer';
                    card.innerHTML = `
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2 text-gray-800">${school.name}</h3>
                            <p class="text-sm text-gray-500 mb-4">${school.district}</p>
                            <div class="space-y-2 text-gray-700">
                                <p><strong>聯繫小學：</strong> ${school.primary}</p>
                                <p><strong>升學率：</strong> ${school.progressionText} ${school.progressionRate > 0 ? `(${school.progressionRate}%)` : ''}</p>
                                <p><strong>學費：</strong> ${school.feeText}</p>
                                <p><strong>性別(幼稚園)：</strong> ${school.genderK}</p>
                                <p><strong>性別(小學)：</strong> ${school.genderP} ${school.genderK !== school.genderP ? '<span class="text-red-500 font-bold ml-2">!注意</span>' : ''}</p>
                            </div>
                        </div>
                    `;
                    card.addEventListener('click', () => openModal(school));
                    resultsContainer.appendChild(card);
                });
            }

            function updateCharts(schools) {
                const chartLabels = schools.map(s => s.name);
                const feeData = schools.map(s => s.fee);
                const progressionData = schools.map(s => s.progressionRate);
                
                if (feeChart) feeChart.destroy();
                if (progressionChart) progressionChart.destroy();
                
                const feeCtx = document.getElementById('feeChart').getContext('2d');
                feeChart = new Chart(feeCtx, {
                    type: 'bar',
                    data: {
                        labels: chartLabels,
                        datasets: [{
                            label: '全年學費 (HKD)',
                            data: feeData,
                            backgroundColor: 'rgba(74, 144, 226, 0.6)',
                            borderColor: 'rgba(74, 144, 226, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.x !== null) {
                                            label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'HKD' }).format(context.parsed.x);
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true
                            },
                            y: {
                                ticks: {
                                  autoSkip: false,
                                  callback: function(value, index, values) {
                                    const label = this.getLabelForValue(value);
                                    return label.length > 12 ? label.substring(0, 10) + '...' : label;
                                  }
                                }
                            }
                        }
                    }
                });

                const progressionCtx = document.getElementById('progressionChart').getContext('2d');
                progressionChart = new Chart(progressionCtx, {
                    type: 'bar',
                    data: {
                        labels: chartLabels,
                        datasets: [{
                            label: '升學率 (%)',
                            data: progressionData,
                            backgroundColor: 'rgba(80, 227, 194, 0.6)',
                            borderColor: 'rgba(80, 227, 194, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                           legend: { display: false },
                           tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.x !== null) {
                                            label += context.parsed.x + '%';
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 100
                            },
                            y: {
                                ticks: {
                                  autoSkip: false,
                                  callback: function(value, index, values) {
                                    const label = this.getLabelForValue(value);
                                    return label.length > 12 ? label.substring(0, 10) + '...' : label;
                                  }
                                }
                            }
                        }
                    }
                });
            }

            function applyFilters() {
                const district = districtFilter.value;
                const gender = document.querySelector('#gender-filter .bg-blue-500').dataset.value;
                const maxFee = parseInt(feeFilter.value);
                const minProgression = parseInt(progressionFilter.value);

                const filteredSchools = schoolData.filter(school => {
                    const districtMatch = district === 'all' || school.district === district;
                    const genderMatch = gender === 'all' || school.genderK === gender;
                    const feeMatch = school.fee <= maxFee;
                    const progressionMatch = school.progressionRate >= minProgression;
                    return districtMatch && genderMatch && feeMatch && progressionMatch;
                });

                renderCards(filteredSchools);
                updateCharts(filteredSchools);
            }

            districtFilter.addEventListener('change', applyFilters);
            
            genderFilter.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    genderFilter.querySelectorAll('button').forEach(btn => {
                        btn.classList.remove('bg-blue-500', 'text-white');
                        btn.classList.add('bg-gray-200', 'text-gray-700');
                    });
                    e.target.classList.add('bg-blue-500', 'text-white');
                    e.target.classList.remove('bg-gray-200', 'text-gray-700');
                    applyFilters();
                }
            });

            feeFilter.addEventListener('input', (e) => {
                feeValue.textContent = parseInt(e.target.value).toLocaleString();
            });
            feeFilter.addEventListener('change', applyFilters);

            progressionFilter.addEventListener('input', (e) => {
                progressionValue.textContent = e.target.value;
            });
            progressionFilter.addEventListener('change', applyFilters);
            
            applyFilters();
        });

        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modal-content');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const modalClose = document.getElementById('modal-close');

        function openModal(school) {
            modalTitle.textContent = school.name;
            modalBody.innerHTML = school.details;
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modalContent.classList.remove('scale-95');
        }

        function closeModal() {
            modal.classList.add('opacity-0');
            modalContent.classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('pointer-events-none');
            }, 300);
        }

        modalClose.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

    </script>
</body>
</html>
